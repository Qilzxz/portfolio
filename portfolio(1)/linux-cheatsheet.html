<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Bash/Linux Cheatsheet ‚Äî Aqil Ali</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500&family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg:       #0d0f0e;
  --bg2:      #131614;
  --bg3:      #1a1d1b;
  --border:   rgba(255,255,255,0.07);
  --fg:       #d4d9d5;
  --muted:    rgba(212,217,213,0.4);
  --green:    #4ade80;
  --green-dk: rgba(74,222,128,0.12);
  --amber:    #f59e0b;
  --amber-dk: rgba(245,158,11,0.1);
  --blue:     #60a5fa;
  --blue-dk:  rgba(96,165,250,0.1);
  --red:      #f87171;
  --red-dk:   rgba(248,113,113,0.1);
  --purple:   #a78bfa;
  --purple-dk:rgba(167,139,250,0.1);
  --cyan:     #22d3ee;
  --cyan-dk:  rgba(34,211,238,0.1);
  --mono:     'IBM Plex Mono', 'Courier New', monospace;
  --sans:     'IBM Plex Sans', sans-serif;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { font-size:16px; }

body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--sans);
  font-weight: 300;
  min-height: 100vh;
  line-height: 1.6;
}

header {
  border-bottom: 1px solid var(--border);
  padding: 20px 32px;
  display: flex; align-items: center; justify-content: space-between;
  position: sticky; top: 0;
  background: rgba(13,15,14,0.94);
  backdrop-filter: blur(12px);
  z-index: 50;
  gap: 20px;
  flex-wrap: wrap;
}

.header-left { display:flex; align-items:center; gap: 16px; }

.logo {
  display: flex; align-items: center; gap: 10px;
  font-family: var(--mono); font-size: 15px; font-weight: 500;
  color: var(--fg); white-space: nowrap;
}
.logo-prompt { color: var(--green); }
.logo-cursor {
  display: inline-block;
  width: 9px; height: 15px;
  background: var(--green);
  animation: blink 1.1s step-end infinite;
  margin-left: 2px; vertical-align: middle;
}
@keyframes blink { 50% { opacity:0; } }

.badge {
  font-family: var(--mono); font-size: 10px; letter-spacing: .1em;
  padding: 3px 10px; border-radius: 20px;
  background: var(--green-dk); color: var(--green);
  border: 1px solid rgba(74,222,128,0.2);
}

/* Search */
.search-wrap {
  position: relative; flex: 1; max-width: 400px; min-width: 200px;
}
.search-wrap svg {
  position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
  color: var(--muted); pointer-events: none;
}
#search {
  width: 100%;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px 14px 10px 40px;
  font-family: var(--mono); font-size: 13px;
  color: var(--fg);
  outline: none;
  transition: border-color .2s;
}
#search:focus { border-color: rgba(74,222,128,0.4); }
#search::placeholder { color: var(--muted); }

.header-right {
  display: flex; align-items: center; gap: 8px;
}
.result-count {
  font-family: var(--mono); font-size: 11px;
  color: var(--muted); white-space: nowrap;
}
.result-count span { color: var(--green); }

/* ‚îÄ‚îÄ SIDEBAR + LAYOUT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.layout {
  display: grid;
  grid-template-columns: 220px 1fr;
  min-height: calc(100vh - 65px);
}

.sidebar {
  border-right: 1px solid var(--border);
  padding: 24px 16px;
  position: sticky; top: 65px;
  height: calc(100vh - 65px);
  overflow-y: auto;
}
.sidebar-label {
  font-family: var(--mono); font-size: 10px; letter-spacing: .18em;
  text-transform: uppercase; color: var(--muted);
  padding: 0 8px; margin-bottom: 10px;
}
.cat-btn {
  display: flex; align-items: center; gap: 10px;
  width: 100%; padding: 9px 10px;
  border-radius: 8px; border: none;
  background: transparent; color: var(--muted);
  font-family: var(--sans); font-size: 13px;
  cursor: pointer; text-align: left;
  transition: background .15s, color .15s;
  margin-bottom: 2px;
}
.cat-btn:hover { background: var(--bg3); color: var(--fg); }
.cat-btn.active { background: var(--bg3); color: var(--fg); }
.cat-dot {
  width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0;
}
.cat-count {
  margin-left: auto;
  font-family: var(--mono); font-size: 10px;
  color: var(--muted); opacity: .6;
}
.cat-btn.active .cat-count { opacity: 1; }

/* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
main { padding: 28px 32px; }

.section-title {
  font-family: var(--mono); font-size: 11px; letter-spacing: .18em;
  text-transform: uppercase; color: var(--muted);
  margin-bottom: 14px; margin-top: 32px;
  display: flex; align-items: center; gap: 12px;
}
.section-title:first-of-type { margin-top: 0; }
.section-title::after {
  content: ''; flex: 1; height: 1px; background: var(--border);
}

.commands-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 10px;
  margin-bottom: 8px;
}

/* ‚îÄ‚îÄ COMMAND CARD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.cmd-card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  cursor: pointer;
  transition: border-color .2s, background .2s, transform .2s;
  position: relative;
  overflow: hidden;
}
.cmd-card:hover {
  border-color: rgba(255,255,255,0.14);
  background: var(--bg3);
  transform: translateY(-1px);
}
.cmd-card::before {
  content: '';
  position: absolute; left: 0; top: 0; bottom: 0;
  width: 3px; border-radius: 10px 0 0 10px;
  background: var(--card-color, var(--green));
  opacity: .7;
}

.cmd-top {
  display: flex; align-items: flex-start; justify-content: space-between;
  gap: 12px; margin-bottom: 8px;
}
.cmd-code {
  font-family: var(--mono); font-size: 13px; font-weight: 500;
  color: var(--card-color, var(--green));
  word-break: break-all; flex: 1;
  line-height: 1.5;
}
.copy-btn {
  flex-shrink: 0;
  background: none; border: none; cursor: pointer;
  color: var(--muted); padding: 2px 4px;
  border-radius: 4px;
  transition: color .15s, background .15s;
  display: flex; align-items: center;
  font-size: 11px; font-family: var(--mono);
  gap: 4px;
}
.copy-btn:hover { color: var(--fg); background: rgba(255,255,255,.06); }
.copy-btn.copied { color: var(--green); }

.cmd-desc {
  font-size: 12px; color: var(--muted);
  line-height: 1.6;
}
.cmd-desc em {
  font-style: normal;
  color: rgba(212,217,213,0.65);
  font-family: var(--mono); font-size: 11px;
  background: rgba(255,255,255,.04);
  padding: 1px 5px; border-radius: 3px;
}

.cmd-flag {
  display: inline-block; margin-top: 6px;
  font-family: var(--mono); font-size: 10px; letter-spacing: .08em;
  padding: 2px 8px; border-radius: 4px;
  background: var(--card-bg, rgba(74,222,128,0.08));
  color: var(--card-color, var(--green));
  border: 1px solid rgba(255,255,255,.05);
}

/* No results */
.no-results {
  display: none; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 80px 20px; text-align: center; grid-column: 1/-1;
}
.no-results.show { display: flex; }
.no-results-icon { font-size: 32px; margin-bottom: 12px; opacity: .4; }
.no-results-text { font-family: var(--mono); font-size: 13px; color: var(--muted); }
.no-results-text span { color: var(--green); }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.toast {
  position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(20px);
  background: var(--bg3); border: 1px solid rgba(74,222,128,0.3);
  color: var(--green); font-family: var(--mono); font-size: 12px;
  padding: 10px 20px; border-radius: 8px;
  opacity: 0; pointer-events: none;
  transition: opacity .25s, transform .25s;
  z-index: 100;
}
.toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@media(max-width: 768px) {
  .layout { grid-template-columns: 1fr; }
  .sidebar { position: static; height: auto; border-right: none; border-bottom: 1px solid var(--border); display:flex; gap:6px; flex-wrap:wrap; padding:12px 16px; }
  .sidebar-label { display:none; }
  .cat-btn { width:auto; padding:6px 12px; font-size:12px; }
  .cat-count { display:none; }
  header { padding:14px 16px; }
  main { padding: 20px 16px; }
  .commands-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<header>
  <div class="header-left">
    <div class="logo">
      <span class="logo-prompt">aqil@linux</span>:<span style="color:var(--blue)">~</span>$<div class="logo-cursor"></div>
    </div>
    <span class="badge">Bash Cheatsheet</span>
  </div>
  <div class="search-wrap">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
    <input type="text" id="search" placeholder="Search commands..." autocomplete="off" spellcheck="false"/>
  </div>
  <div class="header-right">
    <span class="result-count"><span id="countNum">0</span> commands</span>
  </div>
</header>

<div class="layout">
  <aside class="sidebar">
    <div class="sidebar-label">Categories</div>
    <button class="cat-btn active" data-cat="all" onclick="filterCat('all', this)">
      <span class="cat-dot" style="background:var(--fg)"></span>All
      <span class="cat-count" id="count-all">0</span>
    </button>
    <button class="cat-btn" data-cat="navigation" onclick="filterCat('navigation', this)">
      <span class="cat-dot" style="background:var(--green)"></span>Navigation
      <span class="cat-count" id="count-navigation">0</span>
    </button>
    <button class="cat-btn" data-cat="files" onclick="filterCat('files', this)">
      <span class="cat-dot" style="background:var(--amber)"></span>Files & Dirs
      <span class="cat-count" id="count-files">0</span>
    </button>
    <button class="cat-btn" data-cat="permissions" onclick="filterCat('permissions', this)">
      <span class="cat-dot" style="background:var(--red)"></span>Permissions
      <span class="cat-count" id="count-permissions">0</span>
    </button>
    <button class="cat-btn" data-cat="process" onclick="filterCat('process', this)">
      <span class="cat-dot" style="background:var(--blue)"></span>Processes
      <span class="cat-count" id="count-process">0</span>
    </button>
    <button class="cat-btn" data-cat="network" onclick="filterCat('network', this)">
      <span class="cat-dot" style="background:var(--cyan)"></span>Networking
      <span class="cat-count" id="count-network">0</span>
    </button>
    <button class="cat-btn" data-cat="text" onclick="filterCat('text', this)">
      <span class="cat-dot" style="background:var(--purple)"></span>Text & Search
      <span class="cat-count" id="count-text">0</span>
    </button>
    <button class="cat-btn" data-cat="system" onclick="filterCat('system', this)">
      <span class="cat-dot" style="background:var(--fg)"></span>System Info
      <span class="cat-count" id="count-system">0</span>
    </button>
  </aside>

  <main id="main"></main>
</div>

<div class="toast" id="toast">‚úì Copied to clipboard</div>

<script>
const COLORS = {
  navigation:  { color: 'var(--green)',  bg: 'rgba(74,222,128,0.08)'   },
  files:       { color: 'var(--amber)',  bg: 'rgba(245,158,11,0.08)'   },
  permissions: { color: 'var(--red)',    bg: 'rgba(248,113,113,0.08)'  },
  process:     { color: 'var(--blue)',   bg: 'rgba(96,165,250,0.08)'   },
  network:     { color: 'var(--cyan)',   bg: 'rgba(34,211,238,0.08)'   },
  text:        { color: 'var(--purple)', bg: 'rgba(167,139,250,0.08)'  },
  system:      { color: 'var(--fg)',     bg: 'rgba(212,217,213,0.06)'  },
};

const COMMANDS = [
  // NAVIGATION
  { cat:'navigation', cmd:'pwd',                    desc:'Print current working directory ‚Äî shows exactly where you are in the filesystem' },
  { cat:'navigation', cmd:'cd ~',                   desc:'Go to home directory from anywhere', flag:'shortcut' },
  { cat:'navigation', cmd:'cd ..',                  desc:'Move one directory up to the parent folder' },
  { cat:'navigation', cmd:'cd -',                   desc:'Jump back to the previous directory you were in', flag:'handy' },
  { cat:'navigation', cmd:'ls -la',                 desc:'List all files including hidden ones with permissions, size, and timestamps' },
  { cat:'navigation', cmd:'ls -lh',                 desc:'List files with human-readable file sizes <em>KB, MB, GB</em>' },
  { cat:'navigation', cmd:'tree -L 2',              desc:'Show directory structure as a tree, 2 levels deep' },

  // FILES & DIRS
  { cat:'files', cmd:'mkdir -p dir/sub/folder',     desc:'Create nested directories in one command, no errors if they already exist', flag:'-p flag' },
  { cat:'files', cmd:'touch file.txt',              desc:'Create an empty file, or update a file\'s timestamp if it already exists' },
  { cat:'files', cmd:'cp -r source/ dest/',         desc:'Copy a directory and all its contents recursively' },
  { cat:'files', cmd:'mv old.txt new.txt',          desc:'Rename a file ‚Äî also works to move files between directories' },
  { cat:'files', cmd:'rm -rf folder/',              desc:'Delete a folder and everything inside it. No confirmation asked ‚Äî be careful', flag:'destructive' },
  { cat:'files', cmd:'find . -name "*.log"',        desc:'Find all files matching a pattern recursively from current directory' },
  { cat:'files', cmd:'find . -type f -mtime -7',    desc:'Find files modified in the last 7 days' },
  { cat:'files', cmd:'du -sh *',                    desc:'Show disk usage of each item in the current directory in human-readable format' },
  { cat:'files', cmd:'ln -s /path/to/file link',    desc:'Create a symbolic (soft) link pointing to another file or folder', flag:'symlink' },
  { cat:'files', cmd:'cat file.txt',                desc:'Print the entire contents of a file to the terminal' },
  { cat:'files', cmd:'less file.txt',               desc:'View a file one screen at a time ‚Äî press <em>q</em> to quit, <em>/</em> to search' },
  { cat:'files', cmd:'tail -f logfile.log',         desc:'Live-follow a file as it updates ‚Äî essential for watching logs in real time', flag:'live' },
  { cat:'files', cmd:'head -n 20 file.txt',         desc:'Print only the first 20 lines of a file' },
  { cat:'files', cmd:'wc -l file.txt',              desc:'Count the number of lines in a file' },

  // PERMISSIONS
  { cat:'permissions', cmd:'chmod +x script.sh',   desc:'Make a script executable so you can run it with <em>./script.sh</em>' },
  { cat:'permissions', cmd:'chmod 755 file',        desc:'Owner can read/write/execute ‚Äî group and others can read/execute', flag:'common' },
  { cat:'permissions', cmd:'chmod 644 file',        desc:'Owner can read/write ‚Äî everyone else read-only. Standard for web files', flag:'web standard' },
  { cat:'permissions', cmd:'chown user:group file', desc:'Change the owner and group of a file or directory' },
  { cat:'permissions', cmd:'sudo !!',               desc:'Re-run the last command with sudo ‚Äî saves retyping the whole thing', flag:'pro tip' },
  { cat:'permissions', cmd:'whoami',                desc:'Print the current logged-in username' },
  { cat:'permissions', cmd:'id',                    desc:'Show your user ID, group ID and all groups you belong to' },
  { cat:'permissions', cmd:'sudo -l',               desc:'List what commands you\'re allowed to run with sudo' },

  { cat:'process', cmd:'ps aux',                    desc:'List every running process on the system with CPU and memory usage' },
  { cat:'process', cmd:'top',                       desc:'Live system monitor showing processes, CPU, and memory usage. Press <em>q</em> to quit' },
  { cat:'process', cmd:'htop',                      desc:'Interactive process viewer ‚Äî nicer than top. Navigate with arrow keys', flag:'install first' },
  { cat:'process', cmd:'kill -9 PID',               desc:'Force kill a process by its ID ‚Äî the <em>-9</em> signal cannot be caught or ignored', flag:'force' },
  { cat:'process', cmd:'pkill process-name',        desc:'Kill a process by name instead of PID ‚Äî easier than finding the PID first' },
  { cat:'process', cmd:'jobs',                      desc:'List all background and suspended jobs in the current shell session' },
  { cat:'process', cmd:'command &',                 desc:'Run any command in the background ‚Äî terminal stays free for other commands', flag:'background' },
  { cat:'process', cmd:'nohup command &',           desc:'Run a command that survives after you close the terminal or log out', flag:'persistent' },
  { cat:'process', cmd:'Ctrl + C',                  desc:'Stop (kill) the currently running foreground process immediately' },
  { cat:'process', cmd:'Ctrl + Z',                  desc:'Suspend the current process and push it to the background' },

  { cat:'network', cmd:'ping -c 4 google.com',      desc:'Send 4 ICMP packets to test connectivity and measure latency to a host' },
  { cat:'network', cmd:'curl -I https://site.com',  desc:'Fetch just the HTTP headers of a URL ‚Äî useful for debugging responses', flag:'headers only' },
  { cat:'network', cmd:'curl -O https://file.zip',  desc:'Download a file from the internet to the current directory' },
  { cat:'network', cmd:'wget https://file.zip',     desc:'Alternative to curl for downloading files ‚Äî resumes interrupted downloads' },
  { cat:'network', cmd:'ifconfig',                  desc:'Show network interfaces and their IP addresses ‚Äî use <em>ip addr</em> on newer systems' },
  { cat:'network', cmd:'ip addr show',              desc:'Modern way to show all network interfaces and assigned IP addresses' },
  { cat:'network', cmd:'netstat -tulpn',            desc:'Show all open ports and which processes are listening on them', flag:'ports' },
  { cat:'network', cmd:'ss -tulpn',                 desc:'Faster modern alternative to netstat for viewing open sockets and ports' },
  { cat:'network', cmd:'ssh user@host',             desc:'Connect to a remote server via SSH ‚Äî replace with your username and server IP' },
  { cat:'network', cmd:'scp file.txt user@host:~/', desc:'Securely copy a file to a remote server over SSH' },
  { cat:'network', cmd:'traceroute google.com',     desc:'Trace the network path packets take to reach a destination, hop by hop' },

  // TEXT & SEARCH
  { cat:'text', cmd:'grep -r "error" ./logs/',      desc:'Recursively search all files in a folder for the word "error"', flag:'recursive' },
  { cat:'text', cmd:'grep -n "TODO" file.js',       desc:'Find lines containing "TODO" and show their line numbers' },
  { cat:'text', cmd:'grep -i "pattern" file',       desc:'Case-insensitive search ‚Äî matches Pattern, PATTERN, pattern etc.' },
  { cat:'text', cmd:'grep -v "pattern" file',       desc:'Invert match ‚Äî show every line that does NOT contain the pattern', flag:'invert' },
  { cat:'text', cmd:'sed -i "s/old/new/g" file',    desc:'Replace every occurrence of "old" with "new" inside a file, in place', flag:'in-place' },
  { cat:'text', cmd:'awk \'{print $1}\' file',      desc:'Print the first column of every line ‚Äî awk splits by whitespace by default' },
  { cat:'text', cmd:'sort file.txt',                desc:'Sort lines of a file alphabetically and print to stdout' },
  { cat:'text', cmd:'sort -n -r file.txt',          desc:'Sort lines numerically in reverse order (largest first)' },
  { cat:'text', cmd:'uniq -c file.txt',             desc:'Remove duplicate adjacent lines and show how many times each appeared' },
  { cat:'text', cmd:'cut -d"," -f1 file.csv',       desc:'Extract the first column from a CSV file using comma as delimiter' },
  { cat:'text', cmd:'diff file1 file2',             desc:'Compare two files line by line and show what is different between them' },
  { cat:'text', cmd:'command | grep "pattern"',     desc:'Pipe any command\'s output into grep to filter results in real time', flag:'pipe' },

  // SYSTEM INFO
  { cat:'system', cmd:'uname -a',                   desc:'Print all system information ‚Äî kernel name, version, hostname, architecture' },
  { cat:'system', cmd:'df -h',                      desc:'Show disk space usage for all mounted filesystems in human-readable format' },
  { cat:'system', cmd:'free -h',                    desc:'Show total, used, and free RAM and swap memory' },
  { cat:'system', cmd:'uptime',                     desc:'How long the system has been running and the current load averages' },
  { cat:'system', cmd:'history',                    desc:'Show your command history ‚Äî use <em>!n</em> to re-run command number n' },
  { cat:'system', cmd:'history | grep ssh',         desc:'Search through your command history for a specific keyword', flag:'search history' },
  { cat:'system', cmd:'alias ll="ls -la"',          desc:'Create a shortcut ‚Äî type <em>ll</em> instead of <em>ls -la</em>. Add to .bashrc to make permanent' },
  { cat:'system', cmd:'echo $PATH',                 desc:'Print the list of directories your shell searches for executable commands' },
  { cat:'system', cmd:'env',                        desc:'List all environment variables currently set in your shell session' },
  { cat:'system', cmd:'export VAR=value',           desc:'Set an environment variable available to the current session and child processes' },
  { cat:'system', cmd:'lsb_release -a',             desc:'Show Linux distribution name and version ‚Äî useful when you\'re on an unknown machine' },
  { cat:'system', cmd:'crontab -e',                 desc:'Edit your cron jobs ‚Äî scheduled tasks that run automatically at set times', flag:'automation' },
];

let currentCat = 'all';
let currentSearch = '';

// Count per category
const counts = {};
COMMANDS.forEach(c => { counts[c.cat] = (counts[c.cat] || 0) + 1; });
document.getElementById('count-all').textContent = COMMANDS.length;
Object.entries(counts).forEach(([cat, n]) => {
  const el = document.getElementById(`count-${cat}`);
  if (el) el.textContent = n;
});

function filterCat(cat, btn) {
  currentCat = cat;
  document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  render();
}

document.getElementById('search').addEventListener('input', e => {
  currentSearch = e.target.value.toLowerCase().trim();
  render();
});

function render() {
  const query = currentSearch;
  const cat = currentCat;

  const filtered = COMMANDS.filter(c => {
    const matchCat = cat === 'all' || c.cat === cat;
    const matchQ = !query ||
      c.cmd.toLowerCase().includes(query) ||
      c.desc.toLowerCase().includes(query) ||
      (c.flag && c.flag.toLowerCase().includes(query));
    return matchCat && matchQ;
  });

  document.getElementById('countNum').textContent = filtered.length;

  // Group by category in order
  const catOrder = ['navigation','files','permissions','process','network','text','system'];
  const grouped = {};
  catOrder.forEach(k => { grouped[k] = []; });
  filtered.forEach(c => { if (grouped[c.cat]) grouped[c.cat].push(c); });

  const catLabels = {
    navigation: 'üìÅ Navigation',
    files: 'üóÇ Files & Directories',
    permissions: 'üîí Permissions & Users',
    process: '‚öôÔ∏è Processes',
    network: 'üåê Networking',
    text: 'üîç Text & Search',
    system: 'üñ• System Info',
  };

  const main = document.getElementById('main');

  if (filtered.length === 0) {
    main.innerHTML = `<div class="commands-grid"><div class="no-results show">
      <div class="no-results-icon">‚å¶</div>
      <div class="no-results-text">No commands found for <span>"${query}"</span></div>
    </div></div>`;
    return;
  }

  let html = '';
  catOrder.forEach(k => {
    const cmds = grouped[k];
    if (!cmds.length) return;
    const col = COLORS[k];
    html += `<div class="section-title">${catLabels[k]}</div>`;
    html += `<div class="commands-grid">`;
    cmds.forEach(c => {
      const flag = c.flag ? `<span class="cmd-flag" style="--card-color:${col.color};--card-bg:${col.bg}">${c.flag}</span>` : '';
      html += `<div class="cmd-card" style="--card-color:${col.color};--card-bg:${col.bg}" onclick="copyCmd(event, '${c.cmd.replace(/'/g,"\\'")}')">
        <div class="cmd-top">
          <span class="cmd-code">${highlight(c.cmd, query)}</span>
          <button class="copy-btn" title="Copy to clipboard">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
          </button>
        </div>
        <p class="cmd-desc">${highlightDesc(c.desc, query)}</p>
        ${flag}
      </div>`;
    });
    html += `</div>`;
  });

  main.innerHTML = html;
}

function highlight(text, q) {
  if (!q) return text;
  const re = new RegExp(`(${q.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')})`, 'gi');
  return text.replace(re, '<mark style="background:rgba(74,222,128,0.25);color:inherit;border-radius:2px">$1</mark>');
}
function highlightDesc(text, q) {
  if (!q) return text;
  const re = new RegExp(`(${q.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')})`, 'gi');
  return text.replace(re, '<mark style="background:rgba(74,222,128,0.2);color:inherit;border-radius:2px">$1</mark>');
}

let toastTimer;
function copyCmd(event, cmd) {
  navigator.clipboard.writeText(cmd).then(() => {
    const btn = event.currentTarget.querySelector('.copy-btn');
    if (btn) { btn.classList.add('copied'); setTimeout(() => btn.classList.remove('copied'), 1500); }
    const toast = document.getElementById('toast');
    toast.classList.add('show');
    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => toast.classList.remove('show'), 1800);
  });
}

render();
</script>
</body>
</html>
